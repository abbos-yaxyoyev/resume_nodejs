"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateIt = void 0;
const class_transformer_1 = require("class-transformer");
const class_validator_1 = require("class-validator");
const exceptions_1 = require("../constants/exceptions");
const validateIt = async (data, classType, groups) => {
    if (!data) {
        throw exceptions_1.CommonException.ValidationError('Request body should be object');
    }
    const classData = (0, class_transformer_1.plainToClass)(classType, data, {
        excludeExtraneousValues: false,
    });
    const errors = await (0, class_validator_1.validate)(classData, { groups, whitelist: true });
    if (!errors || errors.length === 0)
        return classData;
    throw exceptions_1.CommonException.ValidationError(errors);
};
exports.validateIt = validateIt;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL3ZhbGlkYXRpb24vdmFsaWRhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEseURBQW1FO0FBQ25FLHFEQUEyQztBQUMzQyx3REFBMEQ7QUFFbkQsTUFBTSxVQUFVLEdBQUcsS0FBSyxFQUFLLElBQUksRUFBRSxTQUE4QixFQUFFLE1BQVcsRUFBYyxFQUFFO0lBQ25HLElBQUksQ0FBQyxJQUFJLEVBQUU7UUFDVCxNQUFNLDRCQUFlLENBQUMsZUFBZSxDQUFDLCtCQUErQixDQUFDLENBQUM7S0FDeEU7SUFFRCxNQUFNLFNBQVMsR0FBRyxJQUFBLGdDQUFZLEVBQUMsU0FBUyxFQUFFLElBQVMsRUFBRTtRQUNuRCx1QkFBdUIsRUFBRSxLQUFLO0tBQy9CLENBQUMsQ0FBQztJQUVILE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBQSwwQkFBUSxFQUFDLFNBQWdCLEVBQUUsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFFN0UsSUFBSSxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUM7UUFBRSxPQUFPLFNBQVMsQ0FBQztJQUVyRCxNQUFNLDRCQUFlLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hELENBQUMsQ0FBQztBQWRXLFFBQUEsVUFBVSxjQWNyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsYXNzQ29uc3RydWN0b3IsIHBsYWluVG9DbGFzcyB9IGZyb20gJ2NsYXNzLXRyYW5zZm9ybWVyJztcclxuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICdjbGFzcy12YWxpZGF0b3InO1xyXG5pbXBvcnQgeyBDb21tb25FeGNlcHRpb24gfSBmcm9tICcuLi9jb25zdGFudHMvZXhjZXB0aW9ucyc7XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVJdCA9IGFzeW5jIDxUPihkYXRhLCBjbGFzc1R5cGU6IENsYXNzQ29uc3RydWN0b3I8VD4sIGdyb3VwczogYW55KTogUHJvbWlzZTxUPiA9PiB7XHJcbiAgaWYgKCFkYXRhKSB7XHJcbiAgICB0aHJvdyBDb21tb25FeGNlcHRpb24uVmFsaWRhdGlvbkVycm9yKCdSZXF1ZXN0IGJvZHkgc2hvdWxkIGJlIG9iamVjdCcpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY2xhc3NEYXRhID0gcGxhaW5Ub0NsYXNzKGNsYXNzVHlwZSwgZGF0YSBhcyBULCB7XHJcbiAgICBleGNsdWRlRXh0cmFuZW91c1ZhbHVlczogZmFsc2UsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGVycm9ycyA9IGF3YWl0IHZhbGlkYXRlKGNsYXNzRGF0YSBhcyBhbnksIHsgZ3JvdXBzLCB3aGl0ZWxpc3Q6IHRydWUgfSk7XHJcblxyXG4gIGlmICghZXJyb3JzIHx8IGVycm9ycy5sZW5ndGggPT09IDApIHJldHVybiBjbGFzc0RhdGE7XHJcblxyXG4gIHRocm93IENvbW1vbkV4Y2VwdGlvbi5WYWxpZGF0aW9uRXJyb3IoZXJyb3JzKTtcclxufTtcclxuIl19