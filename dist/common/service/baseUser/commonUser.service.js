"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CommonUserService = void 0;
const tslib_1 = require("tslib");
const md5_1 = tslib_1.__importDefault(require("md5"));
const exceptions_1 = require("../../constants/exceptions");
const common_service_1 = require("../common.service");
class CommonUserService extends common_service_1.CommonServices {
    constructor(model, ErrorException) {
        super(model, ErrorException);
    }
    async findByPassword(password) {
        return await this.findOne({ password: (0, md5_1.default)(password), isDeleted: false });
    }
    async findByIdError(id, options, projection) {
        const user = await this.findById(id, options, projection);
        if (!user)
            throw exceptions_1.CommonUserException.NotFound(id);
        return user;
    }
    async findByPasswordError(password) {
        const user = await this.findByPassword(password);
        if (!user)
            throw exceptions_1.CommonUserException.NotFound(password);
        return user;
    }
}
exports.CommonUserService = CommonUserService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uVXNlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbW1vbi9zZXJ2aWNlL2Jhc2VVc2VyL2NvbW1vblVzZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0Esc0RBQXNCO0FBQ3RCLDJEQUFpRTtBQUVqRSxzREFBbUQ7QUFFbkQsTUFBYSxpQkFBcUIsU0FBUSwrQkFBaUI7SUFDekQsWUFBWSxLQUFtQixFQUFFLGNBQWM7UUFDN0MsS0FBSyxDQUFDLEtBQUssRUFBRSxjQUFjLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRU0sS0FBSyxDQUFDLGNBQWMsQ0FBQyxRQUFRO1FBQ2xDLE9BQU8sTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFhLEVBQUUsUUFBUSxFQUFFLElBQUEsYUFBRyxFQUFDLFFBQVEsQ0FBQyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZGLENBQUM7SUFFTSxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxPQUFRLEVBQUUsVUFBVztRQUNsRCxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsSUFBSTtZQUFFLE1BQU0sZ0NBQW1CLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVNLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRO1FBQ3ZDLE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsSUFBSTtZQUFFLE1BQU0sZ0NBQW1CLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3hELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztDQUNGO0FBcEJELDhDQW9CQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZGVsVHlwZSB9IGZyb20gJ0B0eXBlZ29vc2UvdHlwZWdvb3NlL2xpYi90eXBlcyc7XHJcbmltcG9ydCBtZDUgZnJvbSAnbWQ1JztcclxuaW1wb3J0IHsgQ29tbW9uVXNlckV4Y2VwdGlvbiB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9leGNlcHRpb25zJztcclxuaW1wb3J0IHsgQ29tbW9uVXNlciB9IGZyb20gJy4uLy4uL2RiL2Jhc2VVc2VyLm1vZGVsJztcclxuaW1wb3J0IHsgQ29tbW9uU2VydmljZXMgfSBmcm9tICcuLi9jb21tb24uc2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbW9uVXNlclNlcnZpY2U8VD4gZXh0ZW5kcyBDb21tb25TZXJ2aWNlczxUPiB7XHJcbiAgY29uc3RydWN0b3IobW9kZWw6IE1vZGVsVHlwZTxUPiwgRXJyb3JFeGNlcHRpb24pIHtcclxuICAgIHN1cGVyKG1vZGVsLCBFcnJvckV4Y2VwdGlvbik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgZmluZEJ5UGFzc3dvcmQocGFzc3dvcmQpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRPbmU8Q29tbW9uVXNlcj4oeyBwYXNzd29yZDogbWQ1KHBhc3N3b3JkKSwgaXNEZWxldGVkOiBmYWxzZSB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBmaW5kQnlJZEVycm9yKGlkLCBvcHRpb25zPywgcHJvamVjdGlvbj8pIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRCeUlkKGlkLCBvcHRpb25zLCBwcm9qZWN0aW9uKTtcclxuICAgIGlmICghdXNlcikgdGhyb3cgQ29tbW9uVXNlckV4Y2VwdGlvbi5Ob3RGb3VuZChpZCk7XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBmaW5kQnlQYXNzd29yZEVycm9yKHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5maW5kQnlQYXNzd29yZChwYXNzd29yZCk7XHJcbiAgICBpZiAoIXVzZXIpIHRocm93IENvbW1vblVzZXJFeGNlcHRpb24uTm90Rm91bmQocGFzc3dvcmQpO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfVxyXG59XHJcbiJdfQ==